This code can be use in conjunction with the Quickstart Sample apps
but the proxy JSP and properties file will work a generic proxy setup as well.

The proxy supports SSO sessions with a configurable timeout, see proxy.properties (session.max.inactive.interval).

Steps to produce a working setup:

 1) download PingFederate 6.x.x and deploy it together with a license file

 2) download the quickstart sample apps and deploy according to the documentation
    but without deploying the included data.zip file

 3) copy the proxy.war directory in server/default/deploy (using cp -r)

 4) drop the data.zip from this distribution in server/default/data/drop-in-deployer
    instead of the one that comes with the Quickstart sample apps

 5) modify your /etc/hosts file so that "proxy" resolves to "127.0.0.1" just
    like "localhost"

 6) run the demo by accessing https://localhost:9031/quickstart-app-sp and selecting "Proxy IDP"
    and then PF-DEMO from the subsequent IDP Discovery screen
    
    or, for IDP-initiated-SSO ("2-hop-spanning-target-resource"):
    
    https://localhost:9031/idp/startSSO.ping?PartnerSpId=urn%3Aproxy%3Asp&TargetResource=https%3A%2F%2Fproxy%3A9031%2Fproxy%2F%3FPartnerSpId%3DPF-DEMO%26TargetResource%3Dhttps%3A%2F%2Flocalhost%3A9031%2Fquickstart-app-sp%2Fgo%3Fhans%3Dja

Below is an overview of the settings for the Reference ID IDP and SP adapters
that need to configured to support this configuration.

SP Proxy Adapter Settings
=========================

Instance Name	Proxy SP Adapter
Instance Id	ProxySpAdapter
User Name	ref
Password ref1234
Logout Service Endpoint	https://proxy:9031/proxy/?cmd=sp-slo
Require SSL/TLS	true
Outgoing Attribute Format	JSON
Incoming Attribute Format	JSON
Logout Mode	Front Channel
Skip Host Name Validation	false
<and an attribute contract for all attributes you want to pass over the bridge>

IDP Proxy Adapter Settings
==========================

Instance Name	Proxy IDP Adapter
Instance Id	ProxyIDPAdapter
Authentication Endpoint	https://proxy:9031/proxy/?cmd=idp-sso
User Name	ref
Password ref1234
Logout Service Endpoint	https://proxy:9031/proxy/?cmd=idp-slo
Require SSL/TLS	true
Outgoing Attribute Format	JSON
Incoming Attribute Format	JSON
Logout Mode	Front Channel
Skip Host Name Validation	false
<and an attribute contract for all attributes you want to pass over the bridge>
